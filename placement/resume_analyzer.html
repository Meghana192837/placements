<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ATS Skill-Gap Analyzer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f1f5f9; padding: 20px; color: #334155; }
        .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .upload-zone { border: 2px dashed #3b82f6; padding: 40px; text-align: center; border-radius: 10px; cursor: pointer; background: #eff6ff; }
        .btn-action { background: #3b82f6; color: white; border: none; padding: 12px 25px; border-radius: 6px; font-weight: bold; cursor: pointer; margin-top: 20px; width: 100%; display: none; }
        .score-box { display: flex; align-items: center; justify-content: center; flex-direction: column; margin: 20px 0; }
        .score-circle { width: 100px; height: 100px; border-radius: 50%; border: 8px solid #3b82f6; display: flex; align-items: center; justify-content: center; font-size: 28px; font-weight: bold; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .section { padding: 15px; border-radius: 8px; border: 1px solid #e2e8f0; }
        .found-label { color: #059669; font-weight: bold; }
        .missing-label { color: #dc2626; font-weight: bold; }
        .skill-tag { display: inline-block; padding: 4px 10px; border-radius: 15px; font-size: 13px; margin: 4px; }
        .tag-green { background: #dcfce7; color: #166534; }
        .tag-red { background: #fee2e2; color: #991b1b; }
        .advice-box { background: #fff7ed; border-left: 4px solid #f97316; padding: 15px; margin-top: 20px; font-size: 14px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Resume Career Accelerator</h2>
    <p>Upload your resume to identify skill gaps and get a hiring score.</p>

    <div class="upload-zone" onclick="document.getElementById('fileInput').click()">
        <p id="fileName">üìÅ Drop Resume PDF here or Click to Browse</p>
        <input type="file" id="fileInput" accept=".pdf" style="display:none">
    </div>

    <button id="analyzeBtn" class="btn-action" onclick="processResume()">Identify Skill Gaps</button>

    <div id="results" style="display:none;">
        <div class="score-box">
            <span>ATS Compatibility Score</span>
            <div class="score-circle" id="scoreValue">0%</div>
        </div>

        <div class="grid">
            <div class="section">
                <p class="found-label">‚úÖ Skills You Have:</p>
                <div id="foundSkills"></div>
            </div>
            <div class="section">
                <p class="missing-label">üöÄ Skills to Develop:</p>
                <div id="missingSkills"></div>
            </div>
        </div>

        <div class="advice-box">
            <strong>Pro Tip to get Hired:</strong>
            <p id="careerAdvice"></p>
        </div>
    </div>
</div>

<script>
    const fileInput = document.getElementById('fileInput');
    const analyzeBtn = document.getElementById('analyzeBtn');

    fileInput.onchange = () => {
        if(fileInput.files[0]) {
            document.getElementById('fileName').innerText = "Ready: " + fileInput.files[0].name;
            analyzeBtn.style.display = "block";
        }
    };

    async function processResume() {
        const file = fileInput.files[0];
        const reader = new FileReader();
        reader.onload = async function() {
            const typedarray = new Uint8Array(this.result);
            const pdf = await pdfjsLib.getDocument(typedarray).promise;
            let text = "";
            for (let i = 1; i <= pdf.numPages; i++) {
                const page = await pdf.getPage(i);
                const content = await page.getTextContent();
                text += content.items.map(s => s.str).join(" ");
            }
            analyzeSkills(text);
        };
        reader.readAsArrayBuffer(file);
    }

    function analyzeSkills(text) {
        // Industry Standard Skills Database
        const marketSkills = ["JavaScript", "Python", "React", "Node.js", "SQL", "AWS", "Docker", "Git", "TypeScript", "Agile", "API Design", "Unit Testing", "System Design"];
        
        let found = [];
        let missing = [];
        const resumeText = text.toLowerCase();

        marketSkills.forEach(skill => {
            if (resumeText.includes(skill.toLowerCase())) {
                found.push(skill);
            } else {
                missing.push(skill);
            }
        });

        // Calculate Score
        const score = Math.round((found.length / marketSkills.length) * 100);
        
        // Update UI
        document.getElementById('results').style.display = "block";
        document.getElementById('scoreValue').innerText = score + "%";
        
        document.getElementById('foundSkills').innerHTML = found.map(s => `<span class="skill-tag tag-green">${s}</span>`).join('');
        document.getElementById('missingSkills').innerHTML = missing.map(s => `<span class="skill-tag tag-red">${s}</span>`).join('');

        // Dynamic Suggestions
        let advice = "";
        if (score < 40) {
            advice = "Your resume is missing critical technical foundations. Focus on learning <strong>" + missing.slice(0, 3).join(", ") + "</strong> through online certifications.";
        } else if (score < 70) {
            advice = "Good start! To stand out to top companies, add projects that showcase <strong>" + missing[0] + "</strong> and <strong>" + missing[1] + "</strong>.";
        } else {
            advice = "Excellent skill match! Ensure your resume includes <strong>quantifiable results</strong> (e.g., 'Improved performance by 30%') to secure an interview.";
        }
        document.getElementById('careerAdvice').innerHTML = advice;
    }
</script>

</body>
</html>